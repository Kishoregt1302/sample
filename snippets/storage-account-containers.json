{
  "Storage Account with Containers": {
    "prefix": "anglo-storage-containers",
    "body": [
      "resource storageAccount '${1:Microsoft.Storage/storageAccounts@2021-09-01}' = {",
      "  name: '${2:sit}-st-${3:env}-${4:appname}-${5:001}'",
      "  location: resourceGroup().location",
      "  sku: {",
      "    name: '${6|Standard_LRS,Standard_GRS,Standard_RAGRS,Standard_ZRS,Premium_LRS,Premium_ZRS|}'",
      "  }",
      "  kind: '${7|StorageV2,BlobStorage,BlockBlobStorage,FileStorage,Storage|}'",
      "  properties: {",
      "    allowBlobPublicAccess: ${8|false,true|}",
      "    minimumTlsVersion: 'TLS1_2'",
      "    networkAcls: {",
      "      bypass: 'AzureServices'",
      "      defaultAction: '${9|Deny,Allow|}'",
      "    }",
      "    supportsHttpsTrafficOnly: true",
      "  }",
      "}",
      "",
      "resource container1 'Microsoft.Storage/storageAccounts/blobServices/containers@2021-09-01' = {",
      "  name: '${storageAccount.name}/default/${10:container1}'",
      "  properties: {",
      "    publicAccess: '${11|None,Blob,Container|}'",
      "  }",
      "  dependsOn: [",
      "    storageAccount",
      "  ]",
      "}",
      "",
      "output storageAccountName string = storageAccount.name",
      "output storageAccountId string = storageAccount.id",
      "output container1Name string = container1.name"
    ],
    "description": "Create an Azure Storage Account with containers using Anglo naming conventions"
  }
}